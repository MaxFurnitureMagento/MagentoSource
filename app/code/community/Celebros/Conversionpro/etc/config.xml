<?xml version="1.0"?>
<config>
    <modules>
        <Celebros_Conversionpro>
            <version>0.1.0</version>
        </Celebros_Conversionpro>
    </modules>
    <frontend>
        <routers>
            <conversionpro>
                <use>standard</use>
                <args>
                    <module>Celebros_Conversionpro</module>
                    <frontName>conversionpro</frontName>
                </args>
            </conversionpro>
        </routers>
        <layout>
            <updates>
                <conversionpro>
                    <file>conversionpro.xml</file>
                </conversionpro>
            </updates>
        </layout>
		<events>
            <controller_action_predispatch_catalog_category_view>
                <observers>
                    <conversionpro>
                        <class>conversionpro/observer</class>
                        <method>resetCurrentCatalogLayer</method>
                    </conversionpro>					
                </observers>
            </controller_action_predispatch_catalog_category_view>
            <controller_action_predispatch_catalogsearch_result_index>
                <observers>
                    <conversionpro>
                        <class>conversionpro/observer</class>
                        <method>resetCurrentSearchLayer</method>
                    </conversionpro>				
                </observers>
            </controller_action_predispatch_catalogsearch_result_index>
            <controller_action_predispatch_catalogsearch_advanced_result>
                <observers>
                    <conversionpro>
                        <class>conversionpro/observer</class>
                        <method>resetCurrentSearchLayer</method>
                    </conversionpro>					
                </observers>
            </controller_action_predispatch_catalogsearch_advanced_result>
			<core_block_abstract_to_html_after>
                <observers>
                    <conversionpro>
                        <class>conversionpro/observer</class>
                        <method>initAnalytics</method>
                    </conversionpro>
                </observers>
			</core_block_abstract_to_html_after>
        </events>
    </frontend>
    <admin>
        <routers>
			<conversionpro_admin>
                <use>admin</use>
                <args>
                    <module>Celebros_Conversionpro</module>
                    <frontName>conversionpro_admin</frontName>
                </args>
            </conversionpro_admin>
        </routers>
    </admin>
    <adminhtml>
		<menu>
            <catalog>
                <children>
                    <conversionpro_mapping translate="title" module="conversionpro">
                        <title>Celebros Conversion Pro</title>
                        <action>conversionpro/adminhtml_mapping</action>
                    </conversionpro_mapping>
                </children>
            </catalog>
        </menu>
		<acl>
			<resources>
				<all>
					<title>Allow Everything</title>
				</all>
				<admin>
					<children>
						<system>
							<children>
								<config>
									<children>
										<conversionpro>
											<title translate="title">Celebros</title>
										</conversionpro>
									</children>
								</config>
							</children>
						</system>
						<catalog>
                            <children>
                                <conversionpro_mapping>
                                    <title translate="title">Conversion Pro Settings</title>
                                </conversionpro_mapping>
                            </children>
                        </catalog>
					</children>
				</admin>
			</resources>
		</acl>
		<layout>
			<updates>
				<conversionpro>
					<file>conversionpro.xml</file>
				</conversionpro>
			</updates>
		</layout>
    </adminhtml>
    <global>
        <models>
            <conversionpro>
                <class>Celebros_Conversionpro_Model</class>
                <resourceModel>conversionpro_mysql4</resourceModel>
            </conversionpro>
            <conversionpro_mysql4>
                <class>Celebros_Conversionpro_Model_Mysql4</class>
				<entities>
					<cache>
						<table>conversionpro_cache</table>
					</cache>
					<mapping>
                    	<table>conversionpro_mapping</table>
                	</mapping>
				</entities>
            </conversionpro_mysql4>
        </models>
        <resources>
            <conversionpro_setup>
                <setup>
                    <module>Celebros_Conversionpro</module>
                </setup>
                <connection>
                    <use>core_setup</use>
                </connection>
            </conversionpro_setup>
            <conversionpro_write>
                <connection>
                    <use>core_write</use>
                </connection>
            </conversionpro_write>
            <conversionpro_read>
                <connection>
                    <use>core_read</use>
                </connection>
            </conversionpro_read>
        </resources>
        <blocks>
            <conversionpro>
                <class>Celebros_Conversionpro_Block</class>
            </conversionpro>
			<catalog>
				<rewrite>
					<layer_view>Celebros_Conversionpro_Block_Catalog_Layer_View</layer_view>
					<category_view>Celebros_Conversionpro_Block_Catalog_Category_View</category_view>
				</rewrite>
			</catalog>
			<catalogsearch>
				<rewrite>
					<layer>Celebros_Conversionpro_Block_Catalogsearch_Layer</layer>
					<result>Celebros_Conversionpro_Block_Catalogsearch_Result</result>
				</rewrite>
			</catalogsearch>
			<enterprise_search>
				<rewrite>
					<catalogsearch_layer>Celebros_Conversionpro_Block_Catalogsearch_Layer</catalogsearch_layer>
					<catalog_layer_view>Celebros_Conversionpro_Block_Catalog_Layer_View</catalog_layer_view>
				</rewrite>
			</enterprise_search>
			<catalogsearch>
				<rewrite>
					<layer_filter_attribute>Celebros_Conversionpro_Block_Catalogsearch_Layer_Filter_Attribute</layer_filter_attribute>
				</rewrite>
			</catalogsearch>
			<catalog>
				<rewrite>
					<layer_filter_attribute>Celebros_Conversionpro_Block_Catalogsearch_Layer_Filter_Attribute</layer_filter_attribute>
					<layer_filter_category>Celebros_Conversionpro_Block_Catalogsearch_Layer_Filter_Category</layer_filter_category>
					<layer_filter_price>Celebros_Conversionpro_Block_Catalogsearch_Layer_Filter_Price</layer_filter_price>
				</rewrite>
			</catalog>
			<adminhtml>
	    		<rewrite>
                 	<system_convert_profile_edit_tab_run>Celebros_Conversionpro_Block_System_Convert_Profile_Edit_Tab_Run</system_convert_profile_edit_tab_run>
            	</rewrite>
	     	</adminhtml>
			<checkout>
				<rewrite>
					<cart_crosssell>Celebros_Conversionpro_Block_Checkout_Cart_Crosssell</cart_crosssell>
				</rewrite>
			</checkout>
			<catalog>
				<rewrite>
					<product_list_upsell>Celebros_Conversionpro_Block_Catalog_Product_List_Upsell</product_list_upsell>
				</rewrite>
			</catalog>
			<enterprise_targetrule>
				<rewrite>
					<catalog_product_list_upsell>Celebros_Conversionpro_Block_TargetRule_Catalog_Product_List_Upsell</catalog_product_list_upsell>
					<checkout_cart_crosssell>Celebros_Conversionpro_Block_TargetRule_Checkout_Cart_Crosssell</checkout_cart_crosssell>
				</rewrite>
			</enterprise_targetrule>
        </blocks>
        <helpers>
            <conversionpro>
                <class>Celebros_Conversionpro_Helper</class>
            </conversionpro>
			<enterprise_search>
				<rewrite>
					<data>Celebros_Conversionpro_Helper_Enterprise_Search_Data</data>
				</rewrite>
			</enterprise_search>
			<catalogsearch>
				<rewrite>
					<data>Celebros_Conversionpro_Helper_Catalogsearch_Data</data>
				</rewrite>
			</catalogsearch>
        </helpers>
    </global>
	<default>
		<conversionpro>
			<general_settings>
				<conversionpro_enabled>0</conversionpro_enabled>
				<host></host>
				<port>6035</port>
				<sitekey></sitekey>
			</general_settings>
			<display_settings>
				<campaigns_enabled>1</campaigns_enabled>
    			<alt_message translate="label">We do not have {{query}}, maybe you will be interested in {{new_query}}</alt_message>
				<price_selector>textual</price_selector>
				<enable_multiselect>0</enable_multiselect>
				<go_to_product_on_one_result>1</go_to_product_on_one_result>
			</display_settings>
			<crosssell_settings>
    			<crosssell_limit>4</crosssell_limit>
    			<upsell_limit>4</upsell_limit>
    		</crosssell_settings>
			<export_settings>
				<zipname>products.zip</zipname>
				<datahistoryname>Data_History.zip</datahistoryname>
    			<delimiter>\t</delimiter>
    			<enclosed_values>"</enclosed_values>
				<min_tier_price>0</min_tier_price>
				<type>file</type>
    			<path></path>
				<global_export>0</global_export>
				<extra_tables></extra_tables>
    		</export_settings>
			<nav_to_search_settings>
				<nav_to_search>0</nav_to_search>
				<nav_to_search_search_by>textual</nav_to_search_search_by>
				<nav_to_search_use_full_category_path>category</nav_to_search_use_full_category_path>
				<nav_to_search_enable_blacklist>0</nav_to_search_enable_blacklist>
			</nav_to_search_settings>
			<advanced>
				<export_chunk_size>1000</export_chunk_size>
				<export_process_limit>3</export_process_limit>
				<import_override>1</import_override>
				<enable_monitoring>0</enable_monitoring>
				<enable_connectivity>0</enable_connectivity>
				<connectivity_attempts>5</connectivity_attempts>
				<connectivity_failures>3</connectivity_failures>
			</advanced>
		</conversionpro>
    </default>
	<crontab>
        <jobs>
            <conversionpro_export>
                <run><model>conversionpro/exporter::catalogUpdate</model></run>
            </conversionpro_export>
        </jobs>
    </crontab>
</config>